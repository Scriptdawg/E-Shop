<!DOCTYPE html>
<html lang="en">

<head>
  <%- include("../app/head.ejs") %>
</head>

<body>
  <header>
    <%- include("../app/banner.ejs") %>
  </header>
  
  <%- include("../app/nav.ejs") %>

<div id="container-subpage-product_create" class="container-subpage">
  <main>

    <h2 class="title large"><%= pageTitle %></h2>
    <form method="POST" action="">
      
      <!-- name -->
      <label for="name">Name *</label><br />
      <input
        type="text"
        id="name"
        name="name"
        placeholder="Enter a name ..."
        value="<%= product.name %>"
        autocomplete="off"
      />
      
      <!-- available -->
      <label for="available">Available *</label><br />
      <input
        type="text"
        id="available"
        name="available"
        placeholder="Enter true or false ..."
        value="<%= product.available %>"
        autocomplete="off"
      />
      
      <!-- category -->
      <label for="category">Category *</label><br />
      <input
        type="text"
        id="category"
        name="category"
        placeholder="Enter beef or chicken ..."
        value="<%= product.category %>"
        autocomplete="off"
      />

      <!-- short description -->
      <label for="shortDescription">Short Description *</label><br />
      <textarea id="shortDescription" name="shortDescription"><%= product.shortDescription %></textarea>

      <!-- long description -->
      <label for="longDescription">Long Description</label><br />
      <textarea id="longDescription" name="longDescription"><%= product.longDescription %></textarea>

      <!-- special message -->
      <label for="specialMessage">Special Message</label><br />
      <textarea id="specialMessage" name="specialMessage"><%= product.specialMessage %></textarea>

      <!-- story -->
      <label for="story">Story *</label><br />
      <select id="story" name="story">
        <% if(!product.story) { %>
          <option value="" selected>Pick a story</option>
        <% } %>
        <% stories.forEach(story => { %>
          <% if(product.story && (product.story.id == story.id)) { %>
            <option value="<%= story.id %>" selected><%= story.name %></option>
          <% } else { %>
            <option value="<%= story.id %>"><%= story.name %></option>
          <% } %>
        <% }) %>
      </select>

      <!-- Price -->
      <label for="price">Price</label><br />
      <input
        type="text"
        id="price"
        name="price"
        placeholder="Enter price ..."
        value="<%= product.price %>"
        autocomplete="off"
      />

      <!-- price type -->
      <label for="priceType">Price Type</label><br />
      <select id="priceType" name="priceType">
        <% if(!product.priceType) {
          product.priceType = "/pound" %>
        <% } %>    
        <% priceTypeSelections.forEach(selection => { %>
          <% if(product.priceType && selection === product.priceType) { %>
            <option value="<%= selection %>" selected><%= selection %></option>
          <% } else { %>
            <option value="<%= selection %>"><%= selection %></option>
          <% } %>
        <% }) %>
      </select>

      <!-- cover image  -->
      <label for="cover">Cover</label>
      <input id="cover" name="cover" type="file" class="filepond" />

      <button type="submit">Submit</button>
    </form>

    <p><i>* required</i></p>

    <% if(errors && errors !=='' ) { %>
      <h3 class="title error">Errors:</h3>
      <ul>
        <% errors.forEach(error=> { %>
          <li><%= error.msg %></li>
        <% }) %>
      </ul>
    <% } %>

  </main>
</div>
<footer>
  <!-- site footer -->
  <%- include('../app/footer.ejs') %>
</footer>
</body>
</html>